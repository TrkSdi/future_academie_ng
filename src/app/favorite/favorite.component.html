<div class="container-fluid">

    <div class="row">

        <!-- FORM FOR DISPLAYING / EDITING FAVORITE INFORMATION -->
        <div id="form-area" class="col-md-4 order-md-1">

            @if( favorite) {

            <form action="">

                <div class="form-group">

                    <label class="my-1 mr-2" for="status">Status</label>
                    <select class="custom-select my-1 mr-sm-2" name="status" [disabled]="!(editing$ | async)"
                        [(ngModel)]="favorite.status">
                        <option value="interested" [selected]="favorite.status==='interested'">Intéressé.e</option>
                        <option value="applied" [selected]="favorite.status==='applied'">Postulé</option>
                        <option value="accepted" [selected]="favorite.status==='accepted'">Admis.e</option>
                        <option value="waitlisted" [selected]="favorite.status==='waitlisted'">Liste d'attente</option>
                        <option value="enrolled" [selected]="favorite.status==='enrolled'">Inscrit.e</option>
                    </select>

                </div>

                <div class="form-group">

                    <label for="note">Note</label>
                    <textarea
                        [ngClass]="{'form-control-plaintext': !(editing$ | async),'form-control': editing$ | async }"
                        class="form-control" name="note" rows="3" [readOnly]="!(editing$ | async)"
                        [(ngModel)]="favorite.note">{{favorite.note}}</textarea>
                    <small id="note-help" class="form-text text-muted">Notez ici ce que vous voulez sur le program - vos
                        questions,
                        pourquoi il vous intéresse, etc.</small>

                </div>

                <!-- ALERT message for update/delte information -->
                @if(alerts[0]) {

                <ngb-alert [type]="alerts[0].type" (closed)="close(alerts[0])">{{ alerts[0].message }}</ngb-alert>

                <!-- Delete/Cancel buttons to show if the alert is a delete confirmation -->
                <div [hidden]="alerts[0].type!=='danger'">
                    <button type="button" class="btn btn-danger"
                        (click)="deleteFavorite(favorite.id); close(alerts[0]); ">Supprimer</button>
                    <button type="button" class="btn btn-secondary" (click)="close(alerts[0])">Annuler</button>
                </div>
                }

                <!-- Delete and edit buttons -->
                <div [hidden]="(alerts.length)">
                    <button type="button" class="btn btn-danger" (click)="confirmDelete(favorite.id)"
                        [ngClass]="{'d-none': editing$ | async}">Supprimer le
                        favoris</button>
                    <button type="button" class="btn btn-primary" (click)="editForm()"
                        [ngClass]="{'d-none': editing$ | async}">Editer</button>
                </div>

                <!-- Cancel and save buttons to display when editing -->
                <div [ngClass]="{'d-none': !(editing$ | async)}">
                    <button type="button" class="btn btn-secondary my-1" (click)="cancelEdit()">Annuler</button>
                    <button type="button" class="btn btn-primary my-1" (click)="saveChanges()">Sauvegarder</button>
                </div>

            </form>
            }

        </div>

        <!-- Display the program information -->
        <div id="favoriteProgram" class="col-md-8 order-md-2">

            @if(favoriteProgram){
            <app-studydetail [studyProgram]="favoriteProgram"></app-studydetail>
            }

        </div>

    </div>

    <!-- Return to the previous page button -->
    <div class="row">

        <button (click)="goBack()" type="button" class="btn btn-light">Retourner</button>

    </div>

</div>